{
  "user_info": {
    "description": "聊天附带用户信息设置",
    "type": "object",
    "items": {
      "time_format": {
        "description": "时间格式",
        "type": "string",
        "default": "%Y-%m-%d %H:%M:%S",
        "hint": "使用Python datetime格式，如：%Y-%m-%d %H:%M:%S"
      },
      "template": {
        "description": "用户信息模板",
        "type": "text",
        "default": "[对话信息] 用户：{username}，时间：{time}",
        "hint": "用户信息会追加到现有系统提示的末尾，不会覆盖人格设置。可使用占位符：{username}（用户名）、{user_id}（用户ID）、{time}（时间）、{platform}（平台名）、{chat_type}（聊天类型）。建议保持简洁，避免与人格设置冲突"
      }
    }
  },
  "proactive_reply": {
    "description": "定时主动发送消息设置",
    "type": "object",
    "items": {
      "enabled": {
        "description": "是否启用定时主动发送消息功能",
        "type": "bool",
        "default": false,
        "hint": "启用后，插件会定时向配置的会话发送消息",
        "obvious_hint": true
      },
      "timing_mode": {
        "description": "时间模式",
        "type": "string",
        "default": "fixed_interval",
        "options": ["fixed_interval", "random_interval"],
        "hint": "选择时间模式：fixed_interval=固定间隔（可选随机延迟），random_interval=完全随机间隔"
      },
      "interval_minutes": {
        "description": "定时发送间隔（分钟）",
        "type": "int",
        "default": 600,
        "hint": "每隔多少分钟发送一次主动消息。该参数仅在固定间隔模式(fixed_interval)下生效"
      },
      "message_templates": {
        "description": "消息模板列表",
        "type": "text",
        "default": "\"嗨，最近怎么样？\"\n\"有什么我可以帮助你的吗？\"\n\"好久不见，有什么新鲜事吗？\"\n\"今天过得如何？\"\n\"距离上次聊天已经过去了一段时间，AI上次发送消息是{last_sent_time}\"",
        "hint": "每行一个消息模板，用双引号包围，发送时会随机选择一个。支持占位符：{time}（当前时间）、{last_sent_time}（AI上次发送消息时间）"
      },
      "random_delay_enabled": {
        "description": "是否启用随机延迟发送",
        "type": "bool",
        "default": false,
        "hint": "启用后，在固定间隔基础上增加随机延迟时间。该参数仅在固定间隔模式(fixed_interval)下生效"
      },
      "min_random_minutes": {
        "description": "最小随机延迟时间（分钟）",
        "type": "int",
        "default": 0,
        "hint": "随机延迟的最小值，单位：分钟。该参数仅在固定间隔模式(fixed_interval)下生效"
      },
      "max_random_minutes": {
        "description": "最大随机延迟时间（分钟）",
        "type": "int",
        "default": 30,
        "hint": "随机延迟的最大值，单位：分钟。该参数仅在固定间隔模式(fixed_interval)下生效"
      },
      "random_min_minutes": {
        "description": "随机间隔最小时间（分钟）",
        "type": "int",
        "default": 600,
        "hint": "随机间隔模式下的最小等待时间，单位：分钟。该参数仅在随机间隔模式(random_interval)下生效"
      },
      "random_max_minutes": {
        "description": "随机间隔最大时间（分钟）",
        "type": "int",
        "default": 1200,
        "hint": "随机间隔模式下的最大等待时间，单位：分钟。该参数仅在随机间隔模式(random_interval)下生效"
      },
      "sessions": {
        "description": "目标会话列表",
        "type": "text",
        "default": "",
        "hint": "需要定时发送消息的会话ID，每行一个。格式：platform_name:message_type:session_id。可使用 /proactive add_session 指令添加当前会话"
      },
      "active_hours": {
        "description": "活跃时间段",
        "type": "string",
        "default": "9:00-22:00",
        "hint": "只在此时间段内发送主动消息，格式：开始时间-结束时间（24小时制）"
      },
      "session_user_info": {
        "description": "会话用户信息记录（内部数据）",
        "type": "object",
        "default": {},
        "invisible": true,
        "items": {}
      },
      "last_sent_times": {
        "description": "AI主动发送时间记录（内部数据）",
        "type": "object",
        "default": {},
        "invisible": true,
        "items": {}
      },
      "ai_last_sent_times": {
        "description": "AI发送消息时间记录（内部数据）",
        "type": "object",
        "default": {},
        "invisible": true,
        "items": {}
      }
    }
  }
}
